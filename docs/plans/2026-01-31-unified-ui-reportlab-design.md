# 统一四表单页面（ReportLab后端）设计方案

日期：2026-01-31

## 目标
- 单页同时展示四个方案表单，独立按钮直接下载 PDF。
- 前端不做预览与 html2pdf，全部由后端 ReportLab 生成。
- PDF 文件名为“店铺名_方案名.pdf”。
- 视觉风格为“报告台”质感，温润纸色背景与卡片式排版。

## 架构与数据流
- 前端统一页面包含四个模块：品牌定位、商圈调研、店铺活动、数据统计。
- 每个模块独立提交至 `/api/generate`，携带 `module` 与 `payload_json`。
- 商圈调研模块支持截图上传，其余模块不上传。
- 后端调用上游模型输出结构化 JSON，使用 ReportLab 渲染 PDF，返回下载。
- 文件名由后端统一生成：`{store_name}_{方案名}.pdf`（自动兼容旧字段）。

## 页面布局
- 单列纵向四块卡片，每块一套表单与独立“下载 PDF”按钮。
- 卡片顶部显示方案标题，并有主题色识别条：
  - 品牌定位：#9B5B2A
  - 商圈调研：#2F6FBD
  - 店铺活动：#E07A2F
  - 数据统计：#6B5FB5
- 可选信息区默认展开，支持折叠以节省空间。

## 字段组织（沿用旧版）
### 品牌定位
- 店铺名称、经营品类、店铺地址
- 目标客群、价格区间、主营产品

### 商圈调研
- 商圈名称、位置、商圈类型
- 拟开店/参考店铺、截图上传

### 店铺活动
- 店铺名称、地址、经营品类、营业时间
- 菜品列表（多行）

### 数据统计
- 店铺名称、地址、经营品类、营业时间
- 30天漏斗数据、配送设置、店铺权重与服务开通项

## 交互与错误处理
- 每个模块独立按钮：点击即下载对应 PDF。
- 必填字段为空时提示并高亮。
- 提交中按钮显示加载态，避免重复点击。
- 下载失败时显示后端错误信息。

## 测试计划
- 前端：新增 Node 测试验证统一页面存在、四块表单标题、下载按钮。
- 后端：新增文件名规则测试，确保“店铺名_方案名.pdf”。

